<div class="container-fluid">
  <div class="row">
    <h4 class="title">Search code, web services or apis</h4>
  </div><br>
  <form [formGroup]="messageForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-3"></div>
      <div class="col-md-6">
        <div style="margin-left: 50px">
          <button class="btn sConf" [ngClass]="code ? 'btn-primary' : 'btn-info'" type="button"
            (click)="onClick('code')">code</button>
          <button class="btn sConf" [ngClass]="web_apis ? 'btn-primary' : 'btn-info'" type="button"
            (click)="onClick('web_apis')">web services / apis</button>
          <button class="btn sConf" [ngClass]="everywere ? 'btn-primary' : 'btn-info'" type="button"
            (click)="onClick('everywere')">everywere</button>
        </div>
        <input type="text" formControlName="keyword" class="form-control" placeholder="ender keyword">
        <div *ngIf="code">
          <input type="text" formControlName="language" class="form-control" placeholder="enter language">
        </div>
      </div>
      <div class="col-md-3"></div>
    </div>
    <br>
    <div class="row ">
      <div class="col-md-12 text-center">
        <input type="submit" value="Search" class="btn btn-primary">
      </div>
    </div>

    <!-- <div class="row"> -->

      <div *ngIf="code">
        <!-- <p>searching for code</p> -->

        <div *ngIf="codeResponse">
          <p>Found {{codeResponse.repos.length}} results</p>

          <div class="results">
            <div *ngFor="let repo of codeResponse.repos">
              <img style="width:100px; height: 100px;" [attr.src]="repo.owner_avatar_url"
                [attr.href]="repo.owner_avatar_url">
              <br>
              <a style="color:black" target="_blank" [attr.href]="repo.owner_url">{{ repo.owner_name}}</a>
              <br>
              <a style="color:black" target="_blank" [attr.href]="repo.repo_url">{{ repo.repo_name}}</a>

              <table>
                <tr>
                  <th></th>
                  <th>File name</th>
                  <th>link</th>
                </tr>
                <tr *ngFor="let file of repo.repo_tree">
                  <td *ngIf="file.type=='file'" class="file"> <img style="width:25px; height: 25px;"
                      src="https://cdn2.iconfinder.com/data/icons/origami/PNG/256%20x%20256/file.png"> </td>
                  <td *ngIf="file.type!='file'" class="folder"> <img style="width:25px; height: 25px;"
                      src="data:image/jpeg;base64,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">
                  </td>
                  <td>{{file.name}}</td>
                  <td><a *ngIf="file.type=='file'" style="color:black" target="_blank" [attr.href]="file.conten_url">
                      content </a>
                    <a *ngIf="file.type!='file'" style="color:black" target="_blank" [attr.href]="file.conten_url"> open
                      dir content </a>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
      <!-- EMFANISI GIA API -->
      <div *ngIf="web_apis">
        <!-- <p>searching for web services and apis</p> -->
        <!-- ADVANCED SEARCH START -->
        <button type="button" class="btn btn-info" (click)="filters()">Advanced search</button>
        <div *ngIf="adv_search">
          <div class="row">
            <div class="col-2">
              <label for="provider">Provider</label>
              <input type="text" name="provider" placeholder="provider" class="form-control" formControlName="provider">
            </div>
            <div class="col-2">
              <label for="category">Category</label>
              <select class="form-control" name="category" id="" formControlName="category"></select>
            </div>
            <div class="col-2">
              <label for="ssl">SSL Suport</label>
              <select class="form-control" name="ssl" id="" formControlName="ssl">
                <option value="yes">Yes</option>
                <option value="no">No</option>
              </select>
            </div>
            <div class="col-2">
              <label for="documentation">Documentation</label>
              <select class="form-control" name="documentation" id="" formControlName="doc">
                <option value="yes">Yes</option>
                <option value="no">No</option>
              </select>
            </div>
            <div class="col-2">
              <label for="auth_model">Authetication Model</label>
              <select class="form-control" name="auth_model" id="" formControlName="auth_model">
                
              </select>
            </div>
            <div class="col-2">
              <label for="created_after">Created after</label>
              <input type="date" class="form-control" name="created_after" formControlName="created_after">
            </div>
          </div>
          <div class="row">
              <div class="col-2">
                <label for="swagger">Swagger</label>
                <select class="form-control" name="swagger" id="" formControlName="swagger">
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
              </div>
              <div class="col-2">
                <label for="license">License</label>
                <select class="form-control" name="license" id="" formControlName="license">
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
              </div>
              <div class="col-2">
                <label for="protocol">Protocol</label>
                <select class="form-control" name="protocol" id="" formControlName="protocol">
                  
                </select>
              </div>
              <div class="col-2">
                <label for="data_req_format">Request Format</label>
                <select class="form-control" name="data_req_format" id="" formControlName="req_format">
                </select>
              </div>
              <div class="col-2">
                  <label for="data_res_format">Response Format</label>
                  <select class="form-control" name="data_res_format" id="" formControlName="res_format">
                  </select>
              </div>
              <div class="col-2">
  
              </div>
            </div>
        </div>
        <br>
        <!-- ADVANCED SEARCH FINISH -->
        <div *ngIf="apisResponse">
          <p>Found {{apisResponse.length}} results</p>

          <div *ngFor="let api of apisResponse">
              <div class="apiContainer">
                <div class="row">
                  <div class="col-2">
                    <img src="{{api.api.image}}" width="100" height="100">
                  </div>
                  <div class="col-5">
                    <ul class="apiUl">
                      <li> <p>Name:</p>  {{api.api.name || ' unknown '}}</li>
                      <li> <p>Created at:</p>  {{api.api.created_at || ' unknown '}}</li>
                      <li> <p>Provider:</p>  {{api.api.provider || ' unknown '}}</li>
                    </ul>
                  </div>
                  <div class="col-5">
                    <ul class="apiUl">
                      <li> <p>Endpoint:</p>  <a href="{{api.api.endpoint}}">{{api.api.endpoint || ' unknown '}}</a></li>
                      <li> <p>Homepage:</p>  <a href="{{api.api.homepage}}">{{api.api.homepage || ' unknown '}}</a></li>
                      <li> <p>Category:</p>  <div *ngFor="let cat of api.api.hasCategory"> <li>{{cat || ' unknown '}}</li> </div></li>
                    </ul>
                  </div>
                </div>
                <br>
                <div class="row">
                  <div class="col-md-12 text-center">
                      <ul class="apiUl">
                          <li> <p>Description:</p>  {{api.api.description || ' unknown '}}</li>
                        </ul>
                  </div>
                  
                </div>
                
                <div id="{{api.api.slug || api.api.name}}" style="display: none" class="row">
                  <div class="col-2">
                  </div>
                  <div class="col-5">
                    <ul class="apiUl">
                      <li> <p>License:</p>  {{api.api.license_url || ' unknown '}}</li>
                      <li><p>Updated at:</p> {{api.api.update_at || ' unknown '}}</li>
                      <li><p>Authetication Model:</p> {{api.api.auth_model || ' unknown '}}</li>
                      <li><p>Response Format:</p>   <div *ngFor="let res of api.api.hasSupportedResFormat"> <li>{{res || ' unknown '}}</li> </div></li>
                      <li><p>Protocol:</p> {{api.api.hasProtocol || ' unknown '}}</li>
                    </ul>
                  </div>
                  <div class="col-5">
                    <ul class="apiUl">
                      <li><p>Swagger:</p> <a href="{{api.api.swagger_url}}">{{api.api.swagger_url || ' unknown '}}</a></li>
                      <li><p>SSL Support:</p> {{api.api.ssslSupport? ' Yes ' : ' No '}}</li>
                      <li><p>Request Format:</p>   <div *ngFor="let req of api.api.hasSupportedReqFormat"> <li>{{req || ' unknown '}}</li> </div></li>
                      <li><p>Documentation:</p> <a href="api.api.doc_url">{{api.api.doc_url || ' unknown '}}</a></li>
                    </ul>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12 text-center">
                    <div *ngIf="api.api.slug;else templateName">
                        <a style=" cursor: pointer; " (click)="show_more($event, api.api.slug)">show more</a>
                    </div>
                    <ng-template #templateName>
                        <a style=" cursor: pointer; " (click)="show_more($event, api.api.name)">show more</a>
                    </ng-template>
                  </div>

                </div>
              </div>
            <br>
          </div>


        </div>
      </div>
      <div *ngIf="everywere">
        <p>searching everywere</p>
      </div>
     
  </form>

  <div class="row ">
    <div class="col-md-12 text-center">
      <div [ngClass]="spinner ? 'loader' : '' "></div>
    </div>
  </div>


</div>
